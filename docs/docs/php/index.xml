<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Despliegue de Aplicaciones Web – Webs basadas en PHP + BBDD</title><link>https://lmorillas.github.io/recursos-daw/docs/php/</link><description>Recent content in Webs basadas en PHP + BBDD on Despliegue de Aplicaciones Web</description><generator>Hugo -- gohugo.io</generator><atom:link href="https://lmorillas.github.io/recursos-daw/docs/php/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Instalación base</title><link>https://lmorillas.github.io/recursos-daw/docs/php/lamp/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lmorillas.github.io/recursos-daw/docs/php/lamp/</guid><description>
&lt;div class="pageinfo pageinfo-primary">
&lt;ul>
&lt;li>Instalación entoro LAMP&lt;/li>
&lt;li>&lt;a href="https://es.wikipedia.org/wiki/LAMP">https://es.wikipedia.org/wiki/LAMP&lt;/a>&lt;/li>
&lt;/ul>
&lt;/div>
&lt;p>El acrónimo &lt;strong>LAMP&lt;/strong> se refiere a un entorno configurado en un servidor que nos posibilita servir aplicaciones web escritas en PHP.&lt;/p>
&lt;p>Para ello usamos las siguientes tecnologías:&lt;/p>
&lt;ul>
&lt;li>&lt;code>Linux&lt;/code>, sistema operativo;&lt;/li>
&lt;li>&lt;code>Apache&lt;/code> o &lt;code>nginx&lt;/code>, servidor web;&lt;/li>
&lt;li>&lt;code>MySQL&lt;/code>, &lt;code>MariaDB&lt;/code>, gestores de bases de datos;&lt;/li>
&lt;li>&lt;code>PHP&lt;/code>, lenguaje de programación.&lt;/li>
&lt;/ul>
&lt;h2 id="instalación-base">Instalación base&lt;/h2>
&lt;h3 id="partimos-de-una-configuración-base">Partimos de una configuración base&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>vagrant init bento/ubuntu-22.04
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Edita el Vagrantile para hacer el forward del puerto 8080 al puerto 80 por ejemplo&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ruby" data-lang="ruby">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">Vagrant&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">configure&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;2&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#204a87;font-weight:bold">do&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">|&lt;/span>&lt;span style="color:#000">config&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">config&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">vm&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">box&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;bento/ubuntu-22.04&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">config&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">vm&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">network&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;forwarded_port&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">guest&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">80&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">host&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Levanta y actualiza el sistema&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>vagrant up
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>vagrant ssh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="mariadb">mariadb&lt;/h3>
&lt;p>Instalación del servidor de base de datos&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt install mariadb-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Por defecto el usuario root no tiene contraseña, para acceder necesitaremos hacer con el root del sistema. Es muy recomendable ejecutar el programa &lt;code>mariadb-secure-installation&lt;/code> para configurar la base de datos de manera segura, por ejemplo para indicar una contraseña al root.&lt;/p>
&lt;p>Si necesitas crear una base de datos y un usuario que tenga acceso a la misma:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span> mysql -u root -p
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CREATE DATABASE newdb&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CREATE USER &lt;span style="color:#4e9a06">&amp;#39;username&amp;#39;&lt;/span>@&lt;span style="color:#4e9a06">&amp;#39;localhost&amp;#39;&lt;/span> IDENTIFIED BY &lt;span style="color:#4e9a06">&amp;#39;userpassword&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> GRANT ALL PRIVILEGES ON newdb.* to &lt;span style="color:#4e9a06">&amp;#39;username&amp;#39;&lt;/span>@&lt;span style="color:#4e9a06">&amp;#39;localhost&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> FLUSH PRIVILEGES&lt;span style="color:#000;font-weight:bold">;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> quit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="apache-y-php">Apache y PHP&lt;/h3>
&lt;p>Instalación de apache2 y del módulo que permite que apache2 interprete PHP (apache2 hará el papel de servidor web y de servidor de aplicaciones).&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt install apache2 libapache2-mod-php php php-mysql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="configuración-de-php">Configuración de PHP&lt;/h3>
&lt;p>Archivos de configuración de PHP (según versión. En este caso 7.4, que serguramente es más antigua):&lt;/p>
&lt;ul>
&lt;li>&lt;code>/etc/php/7.4/cli&lt;/code>: Configuración de php para &lt;code>php7.4-cli&lt;/code> (ejecución de php desde la línea de comandos)&lt;/li>
&lt;li>&lt;code>/etc/php/7.4/apache2&lt;/code>: Configuración de php para apache2 usado como módulo&lt;/li>
&lt;li>&lt;code>/etc/php/7.4/apache2/php.ini&lt;/code>: Configuración de php&lt;/li>
&lt;li>&lt;code>/etc/php/7.4/fpm&lt;/code>: Configuración de php para php-fpm&lt;/li>
&lt;li>&lt;code>/etc/php/7.4/mods-available&lt;/code>: Módulos disponibles de php&lt;/li>
&lt;/ul>
&lt;h3 id="comprobación">Comprobación&lt;/h3>
&lt;p>Creamos un fichero &lt;code>info.php&lt;/code> en el &lt;code>documentRoot&lt;/code> (&lt;code>/var/www/html&lt;/code> ) con el siguiente contenido:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-php" data-lang="php">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ce5c00;font-weight:bold">&amp;lt;?&lt;/span>&lt;span style="color:#000">php&lt;/span> &lt;span style="color:#000">phpinfo&lt;/span>&lt;span style="color:#000;font-weight:bold">();&lt;/span> &lt;span style="color:#8f5902;font-style:italic">?&amp;gt;&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Accedemos con el navegador. Si no aparece la información de php y vemos el contenido que hemos escrito, es que no se ha instalado correctamente. Tendrías que ver algo similar a esto:&lt;/p>
&lt;p>Ahora podemos acceder a la URL: &lt;code>http://localhost:8080/info.php&lt;/code>&lt;/p>
&lt;p>Si tenemos problemas de acceso podemos ver los logs del servidor. El fichero de logs de acceso por “defecto”: &lt;code>/var/log/apache/access.log&lt;/code> o el de errores: &lt;code>/var/log/apache/error.log&lt;/code>&lt;/p>
&lt;p>También podemos ver los logs del servicio ejecutando: &lt;code>sudo journalctl -u apache2&lt;/code>&lt;/p>
&lt;h2 id="instalación-desatendida">Instalación desatendida&lt;/h2>
&lt;p>Si ha funcionado esta instalación manual y atendida, destruye el entorno y haz que se genere toda la instalación de forma automática cuando ejecutas &lt;code>vagrant up&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>Tienes que usar un &lt;code>bootstrap.sh&lt;/code> que ejecute tus comandos. Busca ejemplos en internet o usa ChatGPT si tienes dudas.
Se trata de que no tengas que perder tiempo ejecutando comandos cuando hagas una nueva instalación.&lt;/p>
&lt;/blockquote>
&lt;h2 id="readmemd">README.md&lt;/h2>
&lt;p>Elimina el contenido del fichero README.md del repositorio y crea uno nuevo con la documentación (recuerda que tiene que estar escrito en markdown) de todo el proceso de instalación. Incluye también las instrucciones para que alguien pueda usar el repositorio y usar tu instalación de php.&lt;/p></description></item></channel></rss>